- if @transaction && @transaction.errors.any?
  %ul
    - @transaction.errors.full_messages.each do |msg|
      %li
        = msg

- if current_user
  - if current_user.balance_initialised
    Your current balance is:
    = current_user.balance
    - if current_user.balance.zero?
      %br
      Either the system did not assign you any balance yet, or you ran out...
    - else
      %br
      %br
      = form_for(:transaction, url: transactions_path) do |f|
        = f.text_field :to_user_id, placeholder: "TO USER ID"
        = f.text_field :amount, placeholder: "AMOUNT"
        = f.submit "Send credits"


  - else
    In order to start testing the system you need the system, you need to get assigned some balance.
    = button_to('Let\'Start!', { action: :create}, { data: { confirm: 'Are you ready to roll?', disable_with: 'YES!' } } )

- else

  CarbonNZ is implementing a new web interface in order to allow registered users to send carbon credit to other registered users. Feel free to register as many users as you wish.

  %br
  %br

  The service is in a very early stage. It has been released to a whitelist set of IP addresses only, in order to get some feedbacks from real users.

  %br
  %br

  The CarbonNZ web developers really would like to hear any security concern around possibility to send any credit from an account to another by abusing any existing security vulnerability that might exist.

  %br
  %br

  In order to give the CarbonNZ a try, please
  = link_to "Sign-in", new_user_session_path
  or
  = link_to "Sign-up", new_user_registration_path
